{% extends "base.html" %}
{% block style %}
<link rel="stylesheet" href="{{ url_for('static', filename='main.css/home.css')}}">
<link rel="stylesheet" href="{{ url_for('static', filename='main.css/base_page.css')}}">
{% endblock%}
{% block title %}WorldBlog{% endblock %}

{% block content %}

<!-- Темы -->
{% block themes %}
    <div class="container_list_themes">
        <nav>
            <ul class="ul_list-theme">
               <li><a class="all_themes" href="/world">&equiv; Все темы</a></li>
               <li><a class="theme_list" href="/topic/travel">Путешествия</a></li>
               <li><a class="theme_list" href="/topic/technologies">Технологии</a></li>
               <li><a class="theme_list" href="/about">Наука</a></li>
               <li><a class="theme_list" href="/about">Искусство</a></li>
               <li><a class="theme_list" href="/about">Спорт</a></li>
               <li><a class="theme_list" href="/about">Кулинария</a></li>
               <li><a class="theme_list" href="/about">Здоровье</a></li>
               <li><a class="theme_list" href="/about">Образование</a></li>
               <li><a class="theme_list" href="/about">Развлечения</a></li>
            </ul>
        </nav>

    </div>
{% endblock %}


<!--Первый контейнер-->

<div class="container_content1">
    <div class="container_content1_image"><img src="{{ url_for('static', filename='background-image.jpg') }}"></div>
    <div class="container_content1_left">
        <h1>Откройте любимую тему и узнайте что-то новое</h1>
    </div>
</div>

<!--О популярных постах-->
<div class="about_popular_posts">
    <h1>Популярное в WorldBlog</h1>
    <hr>
</div>

<!--Три популярных поста-->

<!--<div class="first_posts">-->
<!--    <div class="container_content2">-->
<!--    <a>container_content2</a>-->
<!--    </div>-->

<!--    <div class="container_content3">-->
<!--    <a>container_content3</a>-->
<!--    </div>-->

<!--    <div class="container_content4">-->
<!--    <a>container_content4</a>-->
<!--    </div>-->
<!--</div>-->

<!--Популярные посты-->

<div class="container_body">
   <div class="container_popular_posts">
    <div class="popular_posts">

            {% if posts %} <!-- если постов нет, показывает сообщение -->
            {% for post in posts %} <!-- Добавлен цикл для перебора всех постов -->

        <div class="container_content">
            <article class="container_content_article">
                    <a class="container_content_link" href="{{ url_for('view_post', post_id=post.id) }}" target="_blank" rel="opener dofollow"></a>
                    <div class="image_post">{{image_post}}</div>

                    <div class="user_post">
                        <div class="user_image"></div>
                        <div class="user_info">
                            <p>{{ post.user.name }} {{ post.user.surname }}</p>
                            <small>{{ post.created_at.strftime('%d.%m.%Y %H:%M') }}</small>
                        </div>
                    </div>

                    <div class="content_post">
                         <h1>{{ post.title[:50] }}{% if post.content|length > 100 %}...{% endif %}</h1>
                         <p>{{ post.content[:100] }}{% if post.content|length > 100 %}...{% endif %}</p>
                    </div>

                    <div class="footer_post">
                        <img class="like_post" src="{{ url_for('static', filename='like_post.png') }}" alt="Лайк">
                        <img class="comment_post" src="{{ url_for('static', filename='comment.png') }}" alt="Коммент">
                    </div>

            </article>
        </div>
            {% endfor %}
    {% else %}
        <p>Пока нет постов. <a href="{{ url_for('create_post') }}">Создайте первый!</a></p>
            {% endif %}

    </div>
</div>

<!--Липкий контейнер-->

<div class="container_sticky">
    <div class="create_account">
        <a class="create_register" href={{ url_for('register') }}></a>

        <div class="create_account_image">
            <img src="{{ url_for('static', filename='cat_is_writing.jpg') }}" alt="Коммент">
        </div>

        <div class="create_account_text">
            <h1>Создайте аккаунт на WorldBlog!</h1>
            <a>Читайте интересные статьи, знакомьтесь с последними новостями или публикуйте собственные посты</a>
        </div>



    </div>
<!--    Недавние посты-->
    <div class="new_posts_h1">
        <h1>Недавние посты</h1>
    </div>
    <hr class = hr_container_sticky>

<!--    Список постов-->
    {% if latest_posts %}
        {% for post in latest_posts %}
    <div class="resent_post1">
        <div class="resent_post1_image"></div>
        <div class="resent_post1_name_post">
            <h3>{{ post.title[:25] }}{% if post.content|length > 100 %}...{% endif %}</h3>
            <p class="post-date">{{ post.created_at.strftime('%d.%m.%Y %H:%M') }}</p>
            <p class="post-preview">{{ post.content[:50] }}{% if post.content|length > 100 %}...{% endif %}</p>
             <a href="{{ url_for('view_post', post_id=post.id) }}" target="_blank" class="read-more">Читать далее</a>
            </div>
        </div>
            <hr class = hr_container_sticky>
        {% endfor %}
    {% endif %}
    </div>

</div>
{% endblock %}