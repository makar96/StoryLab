{% extends "base.html" %}
{% block title %}{{ post.title }}{% endblock %}
    {% block style %}
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css/home.css')}}">
        <link rel="stylesheet" href="{{ url_for('static', filename='main.css/base_page.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css/post.css')}}">

    {% endblock%}

{% block content %}
    <div class="container_body">

        <div class="user_post">
            <div class="user_image"></div>
                <div class="user_info">
                    <a href="{{ url_for('user', user_id=post.user.id) }}">{{ post.user.blogname }}</a>
                </div>
        </div>

        <div class="container_post">

            <div class="container_post_title">
                <h1>{{ post.title }}</h1>
                <small>–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ post.created_at.strftime('%d.%m.%Y %H:%M') }}</small>
            </div>

            <div class="container_post_content">
                <p>{{ post.content | safe }}</p>
            </div>

            <div class="container_post_theme">
                <p>–¢–µ–º–∞: {{ post.theme.name }}</p>
            </div>

            <div class="container_post_footer">

                <form action="/toggle_like/{{ post.id }}" method="POST" class="post-card__action">
                    <button type="submit" class="post-card__action--like" aria-label="–õ–∞–π–∫–Ω—É—Ç—å –ø–æ—Å—Ç">
                        <img src="{{ url_for('static', filename='like_post.png') }}" alt="" aria-hidden="true">
                    </button>
                   <p>{{ Like.query.filter_by(post_id=post.id).count() }}</p>
                </form>
                <img class="comment_post" src="{{ url_for('static', filename='comment.png') }}" alt="–ö–æ–º–º–µ–Ω—Ç">
                <p>{{ num_comments }}</p>
            </div>


        </div>
    </div>
    <div class="container_footer">

{#–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏#}

        <form id="comments" method="POST" action="{{ url_for('comment_add', post_id=post.id) }}" autocomplete="off" novalidate>
            <div class="container-comments">
                <div class="create_comment">
                    <textarea id="content" name="text" placeholder="–ù–∞—á–Ω–∏—Ç–µ –ø–∏—Å–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" rows="5" required></textarea>
                    {% if current_user.is_authenticated %}
                    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
                    {% endif %}
                </div>
            </div>
        </form>

                {% for comment in comments %}

                    <div class="autor-comment">
                    <!--–í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é-->
                        {% if current_user.is_authenticated %}
                        <div class="dropdown">
                            <input type="checkbox" class="dropdown-checkbox">
                                <div class="dropdown-label">‚ãÆ</div>
                            <div class="dropdown-menu">
                    <!-- –§–æ—Ä–º–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
                                <form method="POST" action="{{ url_for('comment_edit', comment_id=comment.id) }}" class="dropdown-form">

                                    <button type="submit" class="dropdown-item edit-btn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                                </form>

                    <!-- –§–æ—Ä–º–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è -->
                                 <form  method="POST" action="{{ url_for('comment_delete', comment_id=comment.id) }}" class="dropdown-form">
                                    <button type="submit" class="dropdown-item delete-btn"
                                         onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                                 </form>
                            </div>
                        </div>
                        {% endif %}

                        <div class="comment-user-image">
                            <div class="image-profile"></div>
                        </div>
                        <div class="container-comment-column">
                            <div class="comment-user-info">
                                <p>{{ comment.user.blogname }}</p>
                                <small>{{ comment.created_at.strftime('%d.%m.%Y %H:%M') }}</small>
                            </div>
                            <div name="text" class="text-comment"><p>{{ comment.text }}</p></div>
                        </div>
                    </div>
                {% endfor %}
    </div>

{#    –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ø–∞–º#}
{#    –í —Å–≤–æ–π—Å—Ç–≤–∞—Ö —Å—Ç–æ–∏—Ç focus, –∏–∑-–∑–∞ —ç—Ç–æ–≥–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–∫—Ä–æ–ª–ª –¥–æ –∏–Ω–ø—É—Ç–∞#}
{#<script>#}
{#    document.addEventListener("DOMContentLoaded", function() {#}
{#        var textarea = document.getElementById('content');#}
{#        textarea.focus();#}
{#    });#}
{#</script>#}
{% endblock %}